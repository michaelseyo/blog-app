{"ast":null,"code":"import _asyncToGenerator from\"/Users/Mike/Desktop/projects/blog-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Mike/Desktop/projects/blog-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/Mike/Desktop/projects/blog-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{addDoc,collection}from\"firebase/firestore\";import{auth,db}from\"../firebase-config\";import{useNavigate}from\"react-router-dom\";import{Button,Container,CardContent,Typography,TextField}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({postHeader:{marginTop:20},field:{marginTop:10,marginBottom:10,display:\"block\"}});function CreatePost(_ref){var isAuth=_ref.isAuth;var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),titleError=_useState4[0],setTitleError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),postText=_useState6[0],setPostText=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),postTextError=_useState8[0],setPostTextError=_useState8[1];var postsCollectionRef=collection(db,\"posts\");var navigate=useNavigate();var createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTitleError(false);setPostTextError(false);if(!(title&&postText)){_context.next=8;break;}_context.next=5;return addDoc(postsCollectionRef,{title:title,postText:postText,author:{name:auth.currentUser.displayName,id:auth.currentUser.uid}});case 5:navigate(\"/\");_context.next=10;break;case 8:if(!title){setTitleError(true);}if(!postText){setPostTextError(true);}case 10:case\"end\":return _context.stop();}}},_callee);}));return function createPost(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!isAuth){navigate(\"/login\");}},[]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{className:classes.postHeader,variant:\"h4\",component:\"h2\",children:\"Create a post\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(TextField,{className:classes.field,label:\"Title\",fullWidth:true,required:true,variant:\"outlined\",onChange:function onChange(e){setTitle(e.currentTarget.value);},error:titleError}),/*#__PURE__*/_jsx(TextField,{className:classes.field,label:\"Post\",fullWidth:true,required:true,variant:\"outlined\",multiline:true,rows:4,onChange:function onChange(e){setPostText(e.currentTarget.value);},error:postTextError})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:createPost,children:\"Submit\"})]});}export default CreatePost;","map":{"version":3,"sources":["/Users/Mike/Desktop/projects/blog-app/src/pages/CreatePost.js"],"names":["React","useState","useEffect","addDoc","collection","auth","db","useNavigate","Button","Container","CardContent","Typography","TextField","makeStyles","useStyles","postHeader","marginTop","field","marginBottom","display","CreatePost","isAuth","classes","title","setTitle","titleError","setTitleError","postText","setPostText","postTextError","setPostTextError","postsCollectionRef","navigate","createPost","author","name","currentUser","displayName","id","uid","e","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { addDoc, collection } from \"firebase/firestore\";\nimport { auth, db } from \"../firebase-config\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button, Container, CardContent, Typography, TextField } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core\"\n\nconst useStyles = makeStyles({\n    postHeader: {\n        marginTop: 20\n    },\n    field: {\n        marginTop: 10,\n        marginBottom: 10,\n        display: \"block\"\n    }\n});\n\nfunction CreatePost({isAuth}) {\n    const classes = useStyles();\n    const [title, setTitle] = useState(\"\");\n    const [titleError, setTitleError] = useState(false);\n    const [postText, setPostText] = useState(\"\");\n    const [postTextError, setPostTextError] = useState(false);\n\n    const postsCollectionRef = collection(db, \"posts\");\n    let navigate = useNavigate();\n    const createPost = async () => {\n        setTitleError(false);\n        setPostTextError(false);\n        if (title && postText) {\n            await addDoc(postsCollectionRef, {\n                title,\n                postText,\n                author: {\n                    name: auth.currentUser.displayName,\n                    id: auth.currentUser.uid\n                }\n            });\n            navigate(\"/\");\n        } else {\n            if (!title) {\n                setTitleError(true);\n            } \n            if (!postText) { \n                setPostTextError(true);\n            } \n        }\n    }\n\n    useEffect(() => {\n        if (!isAuth) {\n            navigate(\"/login\");\n        }\n    }, []);\n\n    return (\n        <Container>\n            <Typography \n                className={classes.postHeader}\n                variant=\"h4\"\n                component=\"h2\"\n            >\n                Create a post\n            </Typography>\n            <CardContent>\n                <TextField\n                    className={classes.field}\n                    label=\"Title\"\n                    fullWidth\n                    required\n                    variant=\"outlined\"\n                    onChange={(e) => {setTitle(e.currentTarget.value)}}\n                    error={titleError}\n                />\n                <TextField \n                    className={classes.field}\n                    label=\"Post\"\n                    fullWidth\n                    required\n                    variant=\"outlined\"\n                    multiline\n                    rows={4}\n                    onChange={(e) => {setPostText(e.currentTarget.value)}}\n                    error={postTextError}\n                />\n            </CardContent>\n            <Button \n                variant=\"outlined\" \n                onClick={createPost}\n            > \n                Submit \n            </Button>\n        </Container>\n    );\n}\n\nexport default CreatePost;"]},"metadata":{},"sourceType":"module"}